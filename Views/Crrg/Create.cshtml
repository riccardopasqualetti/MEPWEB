@using Mep01Web.DTO.Request;
@using MepWeb.Service;
@model CrrgCreateRequest
@inject UserScope _userScope;
@inject IHttpContextAccessor _contextAccessor

<div class="main-mep-container scrolling-container">
	<div class="container">
		<form method="post" name="CrrgCreateForm">
			<div class="p-3 mt-4">

				<div class="row pb-2">
					<h2 class="text-primary">
						Inserimento consuntivo
					</h2>
					<hr />
				</div>
				@*<div asp-validation-summary="All"></div>*@ @*Riporta qui gli stessi errori che mostra sotto i componenti che hanno asp-validation-for*@
				<p>Utente : @_userScope.SV_USR_SIGLA</p>

				<div class="mb-3">
					<table>
						<tr>
							<td>
								<label asp-for="CrrgCRis">Risorsa</label>
								<input asp-for="CrrgCRis" class="form-control" style="width:50px" />
								<span asp-validation-for="CrrgCRis" class="text-danger"></span>
							</td>
							<td>
								<label asp-for="CrrgDtt">Data</label>
								<input asp-for="CrrgDtt" class="form-control" style="width:150px" type="date" />
								<span asp-validation-for="CrrgDtt" class="text-danger"></span>
							</td>
							<td>
								<label asp-for="CrrgTmRunIncrHMS">Tempo</label>
								<input asp-for="CrrgTmRunIncrHMS" class="form-control" style="width:150px" type="time" value="01:00:00" step="1" />
								<span asp-validation-for="CrrgTmRunIncrHMS" class="text-danger"></span>
							</td>
						</tr>
					</table>
				</div>

				@* Modalità *@
				<input asp-for="MemoModalita" id="MemoModalita" type="hidden" />
				<div>
					<input type="radio" class="btn-check" id="modIsl" name="modalita" value="modIsl" onchange="Modalita()">
					<label for="modIsl" class="btn btn-outline-primary">x ISL</label>
					<input type="radio" class="btn-check" id="modCli" name="modalita" value="modCli" onchange="Modalita()" checked="checked">
					<label for="modCli" class="btn btn-outline-primary">x Cliente</label>
					<input type="radio" class="btn-check" id="modCom" name="modalita" value="modCom" onchange="Modalita()">
					<label for="modCom" class="btn btn-outline-primary">x Commessa</label>
				</div>

				@* ISL *@
				<div id="divCrrgRifCliente">
					<div class="form-group" style="margin-top:5px;">
						<label asp-for="CrrgRifCliente">Codice ISL</label>
						<input asp-for="CrrgRifCliente" class="form-control" style="width:150px" id="CrrgRifCliente" onchange="ISLChanged()" />
						<span asp-validation-for="CrrgRifCliente" class="text-danger"></span>
					</div>
					<div class="form-group" style="margin-top:5px;">
						<label>Commessa</label>
						<input class="form-control" id="ISLCommDesc" style="width:100%" disabled="disabled" />
					</div>
				</div>

				@* Cliente *@
				<div id="divComCli">
					<div class="form-group" style="margin-top:5px;">
						<label asp-for="ComCCli">Cliente</label>
						<select asp-for="ComCCli" asp-items="@Model.AcliList.Clienti" class="form-select" id="ComCCli" style="width:350px" onfocusout="CliListChanged()"></select>
					</div>
					@*<div class="progress" id="divComCliBarra">
					<div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 75%;"></div>
					</div>*@
				</div>

				@* Commessa *@
				<div id="divCommCodeDesc">
					<div class="form-group" style="margin-top:5px;">
						<label asp-for="CommCodeDesc">Commessa</label>
						<select asp-for="CommCodeDesc" asp-items="@Model.TbcpList.TbcpListLight" class="form-select" id="CommCodeDesc" style="width:100%" onchange="CommListChanged()"></select>
					</div>
				</div>

				@* Commessa *@
				<div id="divComm">
					<div class="form-group" style="margin-top:5px;">
						<label asp-for="CommCode">Commessa</label>
						<input asp-for="CommCode" class="form-control" id="CommCode" style="width:200px" onchange="CommChanged()" />
						<span asp-validation-for="CommCode" class="text-danger"></span>
					</div>
					<div class="form-group" style="margin-top:5px;">
						<label>Descrizione</label>
						<input class="form-control" id="CommDesc" disabled="disabled" />
					</div>

					@*<div style="margin-top:5px;">
					<div style="float:left;">
					<input id="sf_amount" name="sf_amount" />
					</div>
					<div>
					<input id="tm" name="tm" />
					</div>
					</div>*@

				</div>

				@* Operazione *@
				<div class="form-group" style="margin-top:5px;">
					<label asp-for="NTOper">Operazione</label>
					<select asp-for="NTOper" asp-items="@Model.NTOperList.Operazioni" class="form-select" id="NTOper" style="width:200px"></select>
					<span asp-validation-for="NTOper" class="text-danger"></span>
				</div>

				@* Macroattività - n.d., Garanzia, Assistenza, Verbale *@
				<div class="form-group" style="margin-top:5px;">
					<label asp-for="CrrgCmaatt">Macroattività</label>
					<select asp-for="CrrgCmaatt" asp-items="@Model.CrrgCmaattList.Lista" class="form-select" style="width:120px"></select>
				</div>

				@* Causale *@
				<div class="form-group" style="margin-top:5px;">
					<label asp-for="CrrgCCaus">Causale</label>
					<select asp-for="CrrgCCaus" asp-items="@Model.CrrgCCausList.Lista" class="form-select" style="width:100px"></select>
				</div>

				@* Applicativo *@
				<div class="form-group" style="margin-top:5px;">
					<label asp-for="CrrgApp">Applicativo</label>
					<select asp-for="CrrgApp" asp-items="@Model.AppList.Applicativi" class="form-select" id="CrrgApp" style="width:200px"></select>
				</div>

				@* Modulo *@
				<div class="form-group" style="margin-top:5px;">
					<label asp-for="CrrgMod">Modulo</label>
					<select asp-for="CrrgMod" asp-items="@Model.ModList.Moduli" class="form-select" id="CrrgMod" style="width:200px"></select>
				</div>

				@* Note *@
				<div class="form-group" style="margin-top:5px;">
					<label asp-for="CrrgNote">Note</label>
					<textarea asp-for="CrrgNote" class="form-control" style="width:100%"></textarea>
				</div>
				<br />


				<button type="submit" class="btn btn-primary" style="width:150px">Save</button>
				<a asp-controller="Crrg" asp-action="Index" class="btn btn-secondary" style="width:150px">
					Back to List
				</a>


			</div>
		</form>
	</div>
</div>

@section Scripts{
	@{
		<partial name="_ValidationScriptsPartial" />
	}
}


<script src="~/js/Crrg.js?v=1.186"></script>

